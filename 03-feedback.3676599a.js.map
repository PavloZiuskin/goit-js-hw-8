{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,wBAC9BE,SAAUH,SAASC,cAAc,4BAGnC,IAAIG,EAAU,CACZC,MAAO,GACPF,SAAU,IAEZL,EAAKI,MAAMI,MAAQF,EAAQC,MAC3BP,EAAKK,SAASI,YAAcH,EAAQD,SAEpCL,EAAKC,KAAKS,iBACR,QACAZ,EAAAa,UAAWC,KAOb,SAA0BA,GACxB,MAAMC,EAAoBD,EAAEE,OACxBD,IAAsBb,EAAKI,OAC7BE,EAAQC,MAAQM,EAAkBL,MAClCO,aAAaC,QA5Be,sBA4BkBC,KAAKC,UAAUZ,KACpDO,IAAsBb,EAAKK,WACpCC,EAAQD,SAAWQ,EAAkBL,MACrCO,aAAaC,QA/Be,sBA+BkBC,KAAKC,UAAUZ,I,CAb7Da,CAAiBP,EAAE,GAClB,MAGLZ,EAAKC,KAAKS,iBAAiB,UA8B3B,SAA4BE,GAC1BA,EAAEQ,iBACoB,KAAlBd,EAAQC,OAAqC,KAArBD,EAAQD,WAClCgB,QAAQC,IAAIhB,GACZS,aAAaQ,WAxDe,uBAyD5BjB,EAAQC,MAAQ,GAChBD,EAAQD,SAAW,G,IAVlBL,EAAKI,MAAMI,OAAUR,EAAKK,SAASG,OAbxC,WACE,MAAMgB,EAAYT,aAAaU,QApCD,uBAqCxBC,EAAST,KAAKU,MAAMH,GAErBE,IAGL1B,EAAKI,MAAMI,MAAQkB,EAAOnB,MAC1BP,EAAKK,SAASI,YAAciB,EAAOrB,SACnCC,EAAQC,MAAQmB,EAAOnB,MACvBD,EAAQD,SAAWqB,EAAOrB,S,CAI1BuB","sources":["src/js/03-feedback.js"],"sourcesContent":["var _ = require('lodash');\n\nconst FORM_FEEDBACK_LOKAL_KEY = 'feedback-form-state';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('.feedback-form input'),\n  textarea: document.querySelector('.feedback-form textarea'),\n};\n\nlet formObj = {\n  email: '',\n  textarea: '',\n};\nrefs.input.value = formObj.email;\nrefs.textarea.textContent = formObj.textarea;\n\nrefs.form.addEventListener(\n  'input',\n  _.throttle(e => {\n    onFormStateInput(e);\n  }, 500)\n);\n\nrefs.form.addEventListener('submit', onClearLocalSubmit);\n\nfunction onFormStateInput(e) {\n  const formCurrentTarget = e.target;\n  if (formCurrentTarget === refs.input) {\n    formObj.email = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  } else if (formCurrentTarget === refs.textarea) {\n    formObj.textarea = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  }\n}\n\nfunction autoComplite() {\n  const readLocal = localStorage.getItem(FORM_FEEDBACK_LOKAL_KEY);\n  const newobj = JSON.parse(readLocal);\n\n  if (!newobj) {\n    return;\n  }\n  refs.input.value = newobj.email;\n  refs.textarea.textContent = newobj.textarea;\n  formObj.email = newobj.email;\n  formObj.textarea = newobj.textarea;\n}\n\nif (!refs.input.value || !refs.textarea.value) {\n  autoComplite();\n}\n\nfunction onClearLocalSubmit(e) {\n  e.preventDefault();\n  if (formObj.email !== '' && formObj.textarea !== '') {\n    console.log(formObj);\n    localStorage.removeItem(FORM_FEEDBACK_LOKAL_KEY);\n    formObj.email = '';\n    formObj.textarea = '';\n  }\n}\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$refs","form","document","querySelector","input","textarea","$945622fd0f572e60$var$formObj","email","value","textContent","addEventListener","throttle","e","formCurrentTarget","target","localStorage","setItem","JSON","stringify","$945622fd0f572e60$var$onFormStateInput","preventDefault","console","log","removeItem","readLocal","getItem","newobj","parse","$945622fd0f572e60$var$autoComplite"],"version":3,"file":"03-feedback.3676599a.js.map"}