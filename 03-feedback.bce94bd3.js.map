{"mappings":"gfAAA,IAsCQA,EACAC,EAvCRC,EAAAC,EAAA,SAEMC,EAA0B,sBAE1BC,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,wBAC9BE,SAAUH,SAASC,cAAc,4BAG/BG,EAAU,CACZC,MAAO,GACPF,SAAU,IAEZL,EAAKI,MAAMI,MAAQF,EAAQC,MAC3BP,EAAKK,SAASI,YAAcH,EAAQD,SAEpCL,EAAKC,KAAKS,iBACR,QACAb,EAAAc,UAAW,SAAAC,IAOb,SAA0BA,GACxB,IAAMC,EAAoBD,EAAEE,OACxBD,IAAsBb,EAAKI,OAC7BE,EAAQC,MAAQM,EAAkBL,MAClCO,aAAaC,QAAQjB,EAAyBkB,KAAKC,UAAUZ,KACpDO,IAAsBb,EAAKK,WACpCC,EAAQD,SAAWQ,EAAkBL,MACrCO,aAAaC,QAAQjB,EAAyBkB,KAAKC,UAAUZ,I,CAb7Da,CAAiBP,E,GAChB,MAGLZ,EAAKC,KAAKS,iBAAiB,UA8B3B,SAA4BE,GAC1BA,EAAEQ,iBACoB,KAAlBd,EAAQC,OAAqC,KAArBD,EAAQD,WAClCgB,QAAQC,IAAIhB,GACZS,aAAaQ,WAAWxB,GACxBO,EAAQC,MAAQ,GAChBD,EAAQD,SAAW,G,IAVlBL,EAAKI,MAAMI,OAAUR,EAAKK,SAASG,QAZhCb,EAAYoB,aAAaS,QAAQzB,IACjCH,EAASqB,KAAKQ,MAAM9B,MAK1BK,EAAKI,MAAMI,MAAQZ,EAAOW,MAC1BP,EAAKK,SAASI,YAAcb,EAAOS,SACnCC,EAAQC,MAAQX,EAAOW,MACvBD,EAAQD,SAAWT,EAAOS,U","sources":["src/js/03-feedback.js"],"sourcesContent":["var _ = require('lodash');\n\nconst FORM_FEEDBACK_LOKAL_KEY = 'feedback-form-state';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('.feedback-form input'),\n  textarea: document.querySelector('.feedback-form textarea'),\n};\n\nlet formObj = {\n  email: '',\n  textarea: '',\n};\nrefs.input.value = formObj.email;\nrefs.textarea.textContent = formObj.textarea;\n\nrefs.form.addEventListener(\n  'input',\n  _.throttle(e => {\n    onFormStateInput(e);\n  }, 500)\n);\n\nrefs.form.addEventListener('submit', onClearLocalSubmit);\n\nfunction onFormStateInput(e) {\n  const formCurrentTarget = e.target;\n  if (formCurrentTarget === refs.input) {\n    formObj.email = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  } else if (formCurrentTarget === refs.textarea) {\n    formObj.textarea = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  }\n}\n\nfunction autoComplite() {\n  const readLocal = localStorage.getItem(FORM_FEEDBACK_LOKAL_KEY);\n  const newobj = JSON.parse(readLocal);\n\n  if (!newobj) {\n    return;\n  }\n  refs.input.value = newobj.email;\n  refs.textarea.textContent = newobj.textarea;\n  formObj.email = newobj.email;\n  formObj.textarea = newobj.textarea;\n}\n\nif (!refs.input.value || !refs.textarea.value) {\n  autoComplite();\n}\n\nfunction onClearLocalSubmit(e) {\n  e.preventDefault();\n  if (formObj.email !== '' && formObj.textarea !== '') {\n    console.log(formObj);\n    localStorage.removeItem(FORM_FEEDBACK_LOKAL_KEY);\n    formObj.email = '';\n    formObj.textarea = '';\n  }\n}\n"],"names":["readLocal","newobj","$1WSnx","parcelRequire","$b00c40859be242c5$var$FORM_FEEDBACK_LOKAL_KEY","$b00c40859be242c5$var$refs","form","document","querySelector","input","textarea","$b00c40859be242c5$var$formObj","email","value","textContent","addEventListener","throttle","e","formCurrentTarget","target","localStorage","setItem","JSON","stringify","$b00c40859be242c5$var$onFormStateInput","preventDefault","console","log","removeItem","getItem","parse"],"version":3,"file":"03-feedback.bce94bd3.js.map"}