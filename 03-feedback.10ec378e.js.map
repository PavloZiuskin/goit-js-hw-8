{"mappings":"gfAAA,IAoCQA,EACAC,EArCRC,EAAAC,EAAA,SAEMC,EAA0B,sBAE1BC,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,wBAC9BE,SAAUH,SAASC,cAAc,4BAG/BG,EAAU,CACZC,MAAO,GACPF,SAAU,IAGZL,EAAKC,KAAKO,iBACR,QACAX,EAAAY,UAAW,SAAAC,IAOb,SAA0BA,GACxB,IAAMC,EAAoBD,EAAEE,OACxBD,IAAsBX,EAAKI,OAC7BE,EAAQC,MAAQI,EAAkBE,MAClCC,aAAaC,QAAQhB,EAAyBiB,KAAKC,UAAUX,KACpDK,IAAsBX,EAAKK,WACpCC,EAAQD,SAAWM,EAAkBE,MACrCC,aAAaC,QAAQhB,EAAyBiB,KAAKC,UAAUX,I,CAb7DY,CAAiBR,E,GAChB,MAGLV,EAAKC,KAAKO,iBAAiB,UA8B3B,SAA4BE,GAC1BA,EAAES,iBACoB,KAAlBb,EAAQC,OAAqC,KAArBD,EAAQD,WAClCe,QAAQC,IAAIf,GACZQ,aAAaQ,WAAWvB,GACxBO,EAAQC,MAAQ,GAChBD,EAAQD,SAAW,GACnBL,EAAKI,MAAMS,MAAQ,GACnBb,EAAKK,SAASkB,YAAc,G,IAZ3BvB,EAAKI,MAAMS,OAAUb,EAAKK,SAASQ,QAZhClB,EAAYmB,aAAaU,QAAQzB,IACjCH,EAASoB,KAAKS,MAAM9B,MAK1BK,EAAKI,MAAMS,MAAQjB,EAAOW,MAC1BP,EAAKK,SAASkB,YAAc3B,EAAOS,SACnCC,EAAQC,MAAQX,EAAOW,MACvBD,EAAQD,SAAWT,EAAOS,U","sources":["src/js/03-feedback.js"],"sourcesContent":["var _ = require('lodash');\n\nconst FORM_FEEDBACK_LOKAL_KEY = 'feedback-form-state';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('.feedback-form input'),\n  textarea: document.querySelector('.feedback-form textarea'),\n};\n\nlet formObj = {\n  email: '',\n  textarea: '',\n};\n\nrefs.form.addEventListener(\n  'input',\n  _.throttle(e => {\n    onFormStateInput(e);\n  }, 500)\n);\n\nrefs.form.addEventListener('submit', onClearLocalSubmit);\n\nfunction onFormStateInput(e) {\n  const formCurrentTarget = e.target;\n  if (formCurrentTarget === refs.input) {\n    formObj.email = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  } else if (formCurrentTarget === refs.textarea) {\n    formObj.textarea = formCurrentTarget.value;\n    localStorage.setItem(FORM_FEEDBACK_LOKAL_KEY, JSON.stringify(formObj));\n  }\n}\n\nfunction autoComplite() {\n  const readLocal = localStorage.getItem(FORM_FEEDBACK_LOKAL_KEY);\n  const newobj = JSON.parse(readLocal);\n\n  if (!newobj) {\n    return;\n  }\n  refs.input.value = newobj.email;\n  refs.textarea.textContent = newobj.textarea;\n  formObj.email = newobj.email;\n  formObj.textarea = newobj.textarea;\n}\n\nif (!refs.input.value || !refs.textarea.value) {\n  autoComplite();\n}\n\nfunction onClearLocalSubmit(e) {\n  e.preventDefault();\n  if (formObj.email !== '' && formObj.textarea !== '') {\n    console.log(formObj);\n    localStorage.removeItem(FORM_FEEDBACK_LOKAL_KEY);\n    formObj.email = '';\n    formObj.textarea = '';\n    refs.input.value = '';\n    refs.textarea.textContent = '';\n  }\n}\n"],"names":["readLocal","newobj","$1WSnx","parcelRequire","$b00c40859be242c5$var$FORM_FEEDBACK_LOKAL_KEY","$b00c40859be242c5$var$refs","form","document","querySelector","input","textarea","$b00c40859be242c5$var$formObj","email","addEventListener","throttle","e","formCurrentTarget","target","value","localStorage","setItem","JSON","stringify","$b00c40859be242c5$var$onFormStateInput","preventDefault","console","log","removeItem","textContent","getItem","parse"],"version":3,"file":"03-feedback.10ec378e.js.map"}